<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Home All</title>
<style>
  body { font-family: Arial; display: flex; flex-direction: column; align-items: center; padding: 20px; background: #f0f0f0; }
  h1 { color: #2c3e50; }
  button { font-size: 18px; padding: 15px; margin: 10px; border-radius: 10px; cursor: pointer; color: white; border: none; }
  .on { background-color: #4CAF50; }
  .off { background-color: #b0b0b0; }
</style>
</head>
<body>

<h1>Home All</h1>

<div id="lampadas">
  <button id="lamp1" class="off" onclick="toggleLampada(1)">Lâmpada 1</button>
  <button id="lamp2" class="off" onclick="toggleLampada(2)">Lâmpada 2</button>
  <button id="lamp3" class="off" onclick="toggleLampada(3)">Lâmpada 3</button>
  <button id="lamp4" class="off" onclick="toggleLampada(4)">Lâmpada 4</button>
</div>

<div>
  <button id="todas" class="off" onclick="toggleTodas()">Ligar/Desligar Todas</button>
</div>

<script>
const USER = "valdemir669";
const KEY = "SUA_AIO_KEY_AQUI";

// Estado das lâmpadas (0 = desligada, 1 = ligada)
let estado = [0,0,0,0];
let estadoTodas = 0;

function enviar(feed, valor){
  fetch(`https://io.adafruit.com/api/v2/${USER}/feeds/${feed}/data`, {
    method: "POST",
    headers: {
      "X-AIO-Key": KEY,
      "Content-Type": "application/json"
    },
    body: JSON.stringify({ value: valor })
  });
}

function toggleLampada(n){
  estado[n-1] = estado[n-1] ? 0 : 1;  // alterna estado
  document.getElementById("lamp"+n).className = estado[n-1] ? "on" : "off";
  enviar("lampada-"+n, estado[n-1]);
}

function toggleTodas(){
  estadoTodas = estadoTodas ? 0 : 1;
  for(let i=1; i<=4; i++){
    estado[i-1] = estadoTodas;
    document.getElementById("lamp"+i).className = estadoTodas ? "on" : "off";
    enviar("lampada-"+i, estadoTodas);
  }
}
</script>

</body>
</html>
